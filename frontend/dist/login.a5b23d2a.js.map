{"mappings":"AAAA,+BAA+B;AAC/B,SAAS,cAAc,CAAC,aAAa,gBAAgB,CAAC,UAAU,OAAO;IACrE,EAAE,cAAc,IAAI,sCAAsC;IAE1D,MAAM,QAAQ,SAAS,cAAc,CAAC,SAAS,KAAK;IACpD,MAAM,WAAW,SAAS,cAAc,CAAC,YAAY,KAAK;IAE1D,IAAI;QACF,yBAAyB;QACzB,MAAM,WAAW,MAAM,MAAM,wCAAwC;YACnE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B,iCAAiC;YACjC,MAAM,QAAQ,KAAK,KAAK;YACxB,aAAa,OAAO,CAAC,SAAS;YAE9B,qDAAqD;YACrD,MAAM,eAAe,YAAY;YAEjC,oEAAoE;YACpE,IAAI,aAAa,IAAI,KAAK,UACxB,OAAO,QAAQ,CAAC,IAAI,GAAG,uBAAuB,yCAAyC;iBAEvF,iDAAiD;YACjD,OAAO,QAAQ,CAAC,IAAI,GAAG;QAE3B,OACE,SAAS,cAAc,CAAC,gBAAgB,SAAS,GAAG,KAAK,OAAO,IAAI;IAExE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,SAAS,cAAc,CAAC,gBAAgB,SAAS,GAAG;IACtD;AACF;AAEA,sCAAsC;AACtC,SAAS,YAAY,KAAK;IACxB,MAAM,UAAU,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;IACnC,MAAM,iBAAiB,KAAK,UAAU,gBAAgB;IACtD,OAAO,KAAK,KAAK,CAAC,iBAAiB,uCAAuC;AAC5E","sources":["js/login.js"],"sourcesContent":["// Handle login form submission\r\ndocument.getElementById('loginForm').addEventListener('submit', async (e) => { \r\n  e.preventDefault(); // Prevent the default form submission\r\n\r\n  const email = document.getElementById('email').value;\r\n  const password = document.getElementById('password').value;\r\n\r\n  try {\r\n    // Make login API request\r\n    const response = await fetch('http://localhost:5000/api/auth/login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (response.status === 200) {\r\n      // Save the token to localStorage\r\n      const token = data.token;\r\n      localStorage.setItem('token', token);\r\n\r\n      // Decode the token to get the role (seeker or agent)\r\n      const decodedToken = decodeToken(token);\r\n\r\n      // If the user is a seeker, load the Create Profile form dynamically\r\n      if (decodedToken.role === 'seeker') {\r\n        window.location.href = 'create-profile.html'; // Redirect seeker to create profile page\r\n      } else {\r\n        // If the user is an agent, redirect to dashboard\r\n        window.location.href = 'dashboard.html';\r\n      }\r\n    } else {\r\n      document.getElementById('loginMessage').innerText = data.message || 'Login failed';\r\n    }\r\n  } catch (error) {\r\n    console.error('Error logging in:', error);\r\n    document.getElementById('loginMessage').innerText = 'An error occurred. Please try again.';\r\n  }\r\n});\r\n\r\n// Decode JWT token to extract payload\r\nfunction decodeToken(token) {\r\n  const payload = token.split('.')[1];\r\n  const decodedPayload = atob(payload); // Decode base64\r\n  return JSON.parse(decodedPayload); // Parse the JSON string into an object\r\n}\r\n"],"names":[],"version":3,"file":"login.a5b23d2a.js.map","sourceRoot":"/__parcel_source_root/"}